<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.bruce.designer.dao.mapper.MessageMapper">
	
	
	<!-- 
	select id, message, message_type, source_id, from_id, to_id, status,
		create_time,
		update_time, sum(unread) unread from
		(select id, message, message_type, source_id, from_id, to_id, unread, status, create_time, 
    update_time from tb_message ORDER BY id desc ) aliasMessage
		where to_id= 100012 group by message_type;
		
		 -->
	
	<!-- 消息摘要 -->
	<select id="queryMessageSummary" resultMap="BaseResultMap"
		parameterType="java.lang.Integer">
		select id, message, message_type, source_id, from_id, to_id, status,
		create_time,
		update_time, sum(unread) unread from
		(select
		<include refid="Base_Column_List" />
		from tb_message where to_id= #{id,jdbcType=INTEGER} ORDER BY id desc ) aliasMessage
		 group by message_type;
	</select> 

</mapper>